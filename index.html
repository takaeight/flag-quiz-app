<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>せかい こっき クイズ - flag.q | 親子で遊べる国旗当てゲーム</title>
    <meta name="description" content="親子で楽しく学べる！世界の国旗クイズアプリ。全10問のクイズに挑戦して、国旗マスターを目指そう！インストール不要ですぐ遊べます。">

    <!-- OGP (Open Graph Protocol) -->
    <meta property="og:title" content="せかい こっき クイズ - flag.q">
    <meta property="og:description" content="親子で楽しく学べる国旗クイズ！全問正解できるかな？">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://flag-quiz-app.vercel.app">
    <meta property="og:image" content="https://placehold.co/1200x630/38bdf8/white?text=Flag+Quiz">
    <meta name="twitter:card" content="summary_large_image">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Outfit:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=25.0">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🌍</text></svg>">
</head>

<body>
    <div class="background-animation">
        <!-- Floating shapes will be generated by CSS/JS if needed, or just CSS gradients -->
    </div>

    <main class="app-container">
        <header class="app-header">
            <div class="logo-container">
                <h1 class="logo">flag<span class="dot">.</span>q</h1>
            </div>
            <div class="header-controls">
                <button id="home-btn" class="btn-icon" aria-label="タイトルへもどる">🏠</button>
                <div class="score-container">
                    <span class="score-label">てんすう</span>
                    <span id="score-value">0</span>
                </div>
            </div>
        </header>

        <section id="quiz-section" class="quiz-card glass">
            <div class="progress-bar-container">
                <div id="progress-bar" class="progress-bar"></div>
                <div id="timer-bar-visual" class="timer-bar-visual"></div>
            </div>
            <div class="question-header">
                <span class="question-count">だい <span id="current-question">1</span> もん / 10</span>
                <p class="instruction">この こっき は どこの くに？</p>
            </div>

            <div class="flag-container">
                <div class="flag-wrapper">
                    <img id="flag-image" src="" alt="こっき" class="skeleton">
                </div>
            </div>

            <div id="options-container" class="options-grid">
                <!-- Options will be injected here -->
            </div>

            <div id="feedback-message" class="feedback hidden"></div>
    </main>

    <!-- Start Screen -->
    <div id="start-screen" class="modal visible">
        <div class="modal-content glass">
            <div class="logo-wrapper">
                <div class="globe-container">
                    <canvas id="globe-canvas"></canvas>
                </div>
                <div class="logo-text-col">
                    <h1 class="logo-large">flag<span class="dot">.</span>q</h1>
                    <p class="subtitle-large">せかいのこっきクイズ</p>
                </div>
            </div>
            <div class="difficulty-buttons">
                <button id="mode-easy" class="btn-primary btn-large">かんたん (ゆうめい)</button>
                <button id="mode-normal" class="btn-primary btn-large">ふつう (ヨーロッパ・アジア)</button>
                <button id="mode-hard" class="btn-primary btn-large">むずかしい (アフリカ・なんべい)</button>
                <button id="mode-super" class="btn-primary btn-large">ちょうむずかしい (ちゅうとう・レア)</button>
                <button id="mode-extreme" class="btn-primary btn-large">★スーパーむずかしい★</button>
                <p style="font-size: 0.8rem; margin-top: 0;">※スーパーは スピードしょうぶ！</p>
            </div>
            <button id="calendar-btn" class="btn-sub">📅 カレンダー を みる</button>

            <footer class="start-footer">
                <button id="legal-btn" class="btn-text-small">利用規約・プライバシーポリシー</button>
            </footer>
        </div>
    </div>

    <!-- Legal Modal -->
    <div id="legal-modal" class="modal hidden">
        <div class="modal-content glass legal-content">
            <div class="modal-header">
                <h2>利用規約・プライバシー</h2>
                <button id="close-legal" class="btn-close">×</button>
            </div>
            <div class="scrollable-text">
                <h3>1. 免責事項</h3>
                <p>本アプリは個人の学習・趣味目的で開発されたものです。国旗や国名の正確性には配慮していますが、完全性を保証するものではありません。本アプリの利用によって生じたいかなる損害についても、開発者は責任を負いません。
                </p>

                <h3>2. プライバシーポリシー</h3>
                <p><strong>個人情報の取得について：</strong><br>
                    本アプリでは、氏名、メールアドレス、住所などの個人を特定できる情報は一切取得・保存しません。</p>

                <p><strong>データの保存について：</strong><br>
                    ゲームの進行状況やハイスコアなどのデータは、ご利用の端末（ブラウザ）の「LocalStorage」にのみ保存されます。これらのデータが外部サーバーに送信されることはありません。</p>
            </div>
        </div>
    </div>

    <!-- Calendar Modal -->
    <div id="calendar-modal" class="modal hidden">
        <div class="modal-content glass">
            <div class="modal-header">
                <h2>やったね！カレンダー</h2>
                <button id="close-calendar" class="btn-close">×</button>
            </div>
            <div id="calendar-month-year" class="calendar-title">2023年 10月</div>
            <div class="calendar-grid" id="calendar-grid">
                <!-- Days will be injected here -->
            </div>
        </div>
    </div>

    <!-- Result Modal -->
    <div id="result-modal" class="modal hidden">
        <div class="modal-content glass">
            <div class="final-score">
                <span class="score-number" id="final-score">0</span>
                <span class="score-total">/ 10</span>
            </div>
            <p id="result-comment">よくがんばったね！</p>
            <button id="restart-btn" class="btn-primary">もういちど あそぶ</button>
            <button id="end-to-calendar-btn" class="btn-text">おわる (カレンダーをみる)</button>
        </div>
    </div>

    <div id="debug-info"
        style="position:fixed; bottom:0; left:0; background:rgba(0,0,0,0.9); color:white; font-size:12px; z-index:10000; padding:10px; width: 100%; display: flex; gap: 10px; align-items: center;">
        <!-- Debug removed -->
    </div>

    <div id="feedback-overlay" class="feedback-overlay"></div>

    <script src="game.js"></script>
    <script src="lib/three.min.js"></script>
    <script src="assets/texture_data.js"></script>
    <script src="globe_3d.js"></script>
</body>

</html>